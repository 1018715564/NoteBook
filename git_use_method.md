# git推送至GitHub和下载至本地

## 1 将远程版本库中代码与本地版本库中代码进行合并。

```shell
git pull https://github.com/wugenqiang/NoteBook.git
```



# 2 将本地文件更新Github中文件库

```shell
git add .
git commit -m 'update:更新文件'
```



```
git commit -m "Add: Project"
```

在远程版本库（GitHub/GitLab/Gitee）上创建一个远程仓库。

获取SSH链接（没有配置SSH密钥的话可使用HTTPS链接）

![](https://keyon-photo-1256901694.cos.ap-beijing.myqcloud.com//markdown20191210181906.png)

本地版本库关联远程版本库。

```
git remote add origin git@gitee.com:YanKeyon/YanKeyon.git
```

将远程版本库中代码与本地版本库中代码进行合并。

```
git pull --rebase origin master
```

将本地版本库代码上传至远程版本库。

```
git push -u origin master
```

OK。

## 3.查看版本库状态

```
git status
```

![](https://keyon-photo-1256901694.cos.ap-beijing.myqcloud.com/markdown/1553669958316.png)

标红的文件：FirstFile.txt 表示没有被添加的文件。



## 4.将文件添加到暂存区

在上面我们通过git status可以看到有一个标红文件，将该文件提交到暂存区有两种方式：

1. 提交单个文件到暂存区(<filename>为文件路径)

```
git add <filename>
```

2. 提交当前全部修改过的文件到暂存区

```
git add .
```

**温馨提示**

如果新增了一个空的文件夹，Git是监测不到的，此时需要在该文件夹内创建文件后才可以。



## 5.提交暂存区的内容

```
git commit -m "描述"
```

-m 后面输入的是本次提交的说明，可以输入你本次提交的内容概略，方便以后从历史记录中方便的找到改动记录。



## 6.推送到远程版本库

```
git push origin master
```

也可以只输入`git push` ，默认提交到master分支。



## 7.从远程版本库更新项目到本地

使用场景：

- 当远程版本库有更新，而本地想更新的时候使用
- 当本地想提交时，建议先`git pull`一次，再通过`git add`、`git commit -m ""`和`git push`提交本地代码。

1. 全部更新

```
git pull
```

2. 更新单个文件

```
git fetch
git checkout origin/master -- <filename>
```



## 8.查看单个文件的修改内容

```
git diff <filename>
```

![](https://keyon-photo-1256901694.cos.ap-beijing.myqcloud.com/markdown/1563952760787.png)

-表示删除的内容

+表示增加的内容

**温馨提示**

如果进入diff后发现无法退出，进入：模式，键入q即可。



## 9.查看提交日志

1. 查看全部提交日志

```
git log
```

![](https://keyon-photo-1256901694.cos.ap-beijing.myqcloud.com/markdown/1553675101892.png)

会列出所有提交的commit ID、Author、Date、描述。

也可以通过浏览器访问GitHub/GitLab查看。

2. 查看最新一次提交

```
git log -1
```

3. 以单行的形式查看提交

```
git log oneline
```

4. 查看提交日志，并且能看到分支情况（推荐）

```
git log --graph --pretty=oneline --abbrev-commit
```

![](https://keyon-photo-1256901694.cos.ap-beijing.myqcloud.com/markdown/1553700672654.png)



## 10.撤销修改

撤销修改分多种情况：

1. 该文件没有使用`git add`到暂存区，仍在工作区：

   ```
   git checkout -- <filename>
   ```

2. 该文件使用了`git add`到暂存区，但没有使用`git commit`：

   将暂存区的文件撤销，重新放回工作区：

   ```
   git reset HEAD <filename>
   ```

3. 该文件提交到暂存区并且`git commit`提交到本地版本库：

   版本回退（回退到指定版本）

   ```
   git reset --hard <commit ID>
   ```

**温馨提示**

使用checkout的时候最好在后面加--，单一分支的项目没事，但如果是多分支的，没有`--`就变成了“切换到另一个分支”的命令。

## 11.版本回退

1. 回退到上一个版本

```
git reset --hard HEAD
```

2. 回退到指定版本

```
git reset --hard <commit ID>
```

3. 如果你回退版本后想重新回到新版本

   命令reflog可以记录你的每一次命令，找到想回去的commit ID，使用reset即可。

```
git reflog
```

## 12.提交忽略文件的配置

1. 在仓库根目录下新建.gitignore文件

2. 添加忽略规则

   ```
   忽略规则如下：#			表示此为注释，将被Git忽略*.a			表示忽略所有.a结尾的文件bulid/		表示忽略build/目录下的所有文件bin/:		表示该文件夹下所有内容都被忽略，不忽略bin文件夹/bin:		表示忽略根目录下的bin文件夹**/foo:		表示忽略/foo,a/foo,a/b/foo等!*.zip		表示不忽略所有.zip结尾的文件
   ```

   **温馨提示：**

   如果你不慎在创建.gitignore文件之前就push了项目，那么即使你在.gitignore文件中写入新的过滤规则，这些规则也不会起作用，Git仍然会对所有文件进行版本管理。简单来说出现这种问题的原因就是Git已经开始管理这些文件了，所以你无法再通过过滤规则过滤它们。所以大家一定要养成在项目开始就创建.gitignore文件的习惯，否则一单push，处理起来会非常麻烦。

   **模板**

   在GitHub上有一个专门为各个平台提供的.gitignore模板

   https://github.com/github/gitignore

   其中包括针对Android项目的忽略模板：

   ```
   # Built application files*.apk*.ap_*.aab# Files for the ART/Dalvik VM*.dex# Java class files*.class# Generated filesbin/gen/out/# Gradle files.gradle/build/# Local configuration file (sdk path, etc)local.properties# Proguard folder generated by Eclipseproguard/# Log Files*.log# Android Studio Navigation editor temp files.navigation/# Android Studio captures foldercaptures/# IntelliJ*.iml.idea/workspace.xml.idea/tasks.xml.idea/gradle.xml.idea/assetWizardSettings.xml.idea/dictionaries.idea/libraries.idea/caches# Android Studio 3 in .gitignore file..idea/caches/build_file_checksums.ser.idea/modules.xml# Keystore files# Uncomment the following lines if you do not want to check your keystore files in.#*.jks#*.keystore# External native build folder generated in Android Studio 2.2 and later.externalNativeBuild# Google Services (e.g. APIs or Firebase)# google-services.json# Freelinefreeline.pyfreeline/freeline_project_description.json# fastlanefastlane/report.xmlfastlane/Preview.htmlfastlane/screenshotsfastlane/test_outputfastlane/readme.md# Version controlvcs.xml# lintlint/intermediates/lint/generated/lint/outputs/lint/tmp/# lint/reports/
   ```

## 13.更新/推送失败的解决方案

1. git pull更新失败

   ![](https://keyon-photo-1256901694.cos.ap-beijing.myqcloud.com/markdown/1553678236793.png)

   出现错误，提示你本地的修改与远程版本库的修改冲突了。

   蓝框中的文件即为冲突的文件。

   **解决方法**

   1. 本地备份该文件。
   2. 通过`git checkout -- <filename>`撤销本地对该文件的修改。
   3. 此时使用`git pull`即可更新。
   4. 然后再进行自己的修改并推送到远程版本库即可。

2. git push推送失败

   ![](https://keyon-photo-1256901694.cos.ap-beijing.myqcloud.com/markdown/1553678626072.png)

   出现的原因一般是由于本地没更新却推送导致的。

   此时通过`git pull`更新一下项目即可再次推送。

   **温馨提示**

   建议每次提交之前，先更新一下，确保版本最新后再提交。


## 14.提高效率的小技巧：配置别名

1. git status 等价于 git st

```
git config --global alias.st status
```

2. git checkout -- 等价于 git co-

```
git config --global alias.co- checkout --
```

3. git commit 等价于 git co

```
git config --global alias.co "commit -m"
```

4. git push 等价于 git ps

```
git config --global alias.ps push
```

5. git pull 等价于 git pl

```
git config --global alias.pl pull
```

7. git log ...(打印分支) 等价于 git lg

```
git config --global alias.lg "log '--graph' '--pretty=oneline' '--abbrev-commit'"
```

8. 取消别名

```
git config --global --unset alias.别名
```

**温馨提示**

- 配置别名时，如果命令含有多个参数，需要使用""与''将参数包含起来，否则设置会无效。
- 不要重复配置别名，如重复配置，输入`git config --global --replace-all alias.别名 "命令"`即可恢复到一个配置。
- 输入`git config --list`查看配置列表



# Git进阶：分支管理

> 参考：廖雪峰Git教程：https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/0013743862006503a1c5bf5a783434581661a3cc2084efa000
>
> https://www.jianshu.com/p/92305d949c0e

![](https://keyon-photo-1256901694.cos.ap-beijing.myqcloud.com/markdown/20190724152127.png)

## 1.创建分支

创建一个分支，名为dev

```
git branch dev
```

## 2.切换分支

切换到dev分支

```
git checkout dev
```

## 3.创建并切换分支

创建并切换到dev分支，即上面两条命令可合成一条。

```
git checkout -b dev
```

## 4.查看当前分支

```
git branch
```

## 5.合并分支到当前分支

合并dev分支到当前分支

```
git merge dev
```

## 6.删除分支

删除dev分支

```
git branch -d dev
```

