# C 程序设计

# 前言

* 1. C语言用在哪里？
  
  * 操作系统
  * 嵌入式系统
  * 驱动程序
  * 底层驱动
* 图形引擎、图像处理、声音效果
  
* 2. C需要被编译才能运行
  
  * 编辑器
  * 编译器
* 或者 `IDE` （集成开发环境）
  
* 3. 推荐的编程软件
  
  * [Dev-C++](https://sourceforge.net/projects/orwelldevcpp/?source=directory)



# 知识点

> C语言程序设计——谭浩强著

* 参考博客：[璇小姐](https://blog.csdn.net/weixin_44254963/article/details/85787504)

## 第一章

* 1. 计算机是不能识别高级语言程序的，也要进行翻译，用一种称为编译程序的软件把用高级语言写的程序（称为源程序）转换为机器指令的程序（称为目标程序），然后让计算机执行机器指令程序，最后得到结果。
* 2. 高级语言经历的不同发展阶段
  
  * （1）非结构化的语言：
    * 编程风格随意，符合语法规则即可，无严格规范要求，程序流程可随意跳转，缺点难以阅读和维护
  * （2）结构化语言
    * 有良好特性的基本结构（顺序结构，分支结构，循环结构），优点程序结构清晰，益于编写，阅读和维护。
  * （3）面向对象的语言C++，JAVA，C#等。易于处理规模较大程序。
  
* 3. C语言保持了BCPL和B语言的优点（精炼，接近硬件），又克服了他们的缺点（过于简单，无数据类型），C语言的新特点表现在具有多种数据类型（如字符，数值，数组，结构体和指针等），可降低用它所写的软件对硬件平台的依赖程度，使之具有可移植性。
* 4. C语言特点
  
  * （1）语言简洁，紧凑，使用方便，灵活。
  * （2）运算符丰富。
  * （3）数据类型丰富，
  * （4）具有结构化的控制语句
  * （5）语法限制不太严格，程序设计自由度大。
  * （6）C语言允许直接访问物理地址，能进行位操作，既具有高级语言的功能，又具有低级语言的许多功能，这种双重性，使它既是成功的系统描述语言，又是通用的程序设计语言。
  * （7）可移植性好。（8）生成目标代码质量高，程序执行效率高。



## 第二章

* 1. 计算机算法可分为两大类别，数值运算算法和非数值运算算法。

* 2. 算法具有一般性，通用性和灵活性。
* 3. 判断一个数是不是素数，不必被2n-1的整数除，只需被2n/2间整数除即可，甚至只需被2~根号n之间的整数除即可。
* 4. 一个有效算法应具有以下特点，有穷性，确定性，有零个或多个输入，有一个或多个输出，有效性。
* 5. 表示算法方法：自然语言，传统流程图，结构化流程图，伪代码等。（流程图不要忘记画箭头，因为它是反映流程的先后的，不画箭头就难以判定各框执行次序）。
* 6. C语言三种基本结构：顺序结构，选择结构，循环结构。



## 第三章

* 1. 数据有两种表现形式：常量和变量

* 2. 常量分为

  * （1）整型常量，如：1000，12345，0，-345
  * （2）实型常量，十进制小数形式，由数字和小数点组成，或指数形式如 12.34e3（代表12.34*10的三次方），但e或E之前必须有数字，且E或e后面必须为整数
  * （3）字符常量可分为普通字符：用单撇号括起来的一个字符，‘a’,‘b’，单撇号只是一个界限符，字符常量只能是一个字符，不包括单撇号。
  * （4）转义字符，意思是将""后面的字符转换成另外的意义，字符串常量。
  * （5）符号常量这种用一个符号名代表一个常量的，即为符号常量。

* 3. 变量必须先定义后使用。

* 4. C语言规定标识符只能由字母，数字。下划线3种字符组成，且第一个字符必须为字母或下划线。

* 5. 自增运算符和自减运算符只能用于变量，而不能用于常量或表达式，如：5++或（a+b）++都是不合法的。

* 6. 强制类型转换运算优先于%运算。

* 7. 一个函数包含声明部分和执行部分。

* 8. %7.2f指的是指定数据占七列，其中小数占两列。

* 9. 若想输出字符“%”，应该在格式控制字符串中连续两个%表示，如：printf("%f%%\n",1.0/3)
     输出0.333333%。

## 第四章

* 1. else与离它最近的未配对的if配对（考试必考）

* 2. C语言中要把大写字母转化为小写字母算法为ch=(ch>='A'&&ch<='a')?(ch+32):ch;

* 3. swich后面括号内的表达式其值的类型应为整数类型（包括字符型）。

     可以没有default标号，此时如果没有与swich表达式相匹配的case常量，则不执行任何语句，流程转到swich语句的下一个语句。

     每个case标号出现次序不影响执行结果，例如，可以先出现default标号，再出现case’D’,然后是case’B’.如果在各case语句中没有break语句，则连续输出。

     最后一个case语句可不用写break语句，因为已经到了语句的结束处，多个case标号可以共用一组执行语句。



## 第五章

* 1. break语句只能用于循环语句和switch语句之中，而不能单独使用。
* 2. 有时并不希望终止整个循环的操作，而只希望提前结束本次循环，而接着执行下次循环，这时可以用continue语句。
* 3. 如果是双重循环，在内循环体内有一个break语句，提前终止内循环，而不是终止整个双重循环。
* 4. 在C库函数中，有两个求绝对值的函数，一个是abs(x),求整数x的绝对值，结果是整型，另一个fabs(x)，x是双精度数。



## 第六章

* 1. 数组是一组有序数据的集合，数组中的每一个元素都属于同一个数据类型。
     定义一维数组的一般形式是：类型符 数组名[常量表达式]
     说明（1）数组名的命名规则和变量名相同，遵循标识符命名规则，（2）指定a[10],表示a数组有10个元素，注意，下标是从0开始，这10个元素是，a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9]。按上面的定义，不存在数组元素a【10】
     （3）常量表达式中可以包含常量和符号常量，如：int a[3+5];是合法的，但a[n]是不合法的，因为n是变量。
     （4）如果在被调用的函数（不包括主函数）中定义数组，其长度可以是变量或非常量表达式。
* 2. 在调用func函数时，形参n从实参得到值，这种情况称为“可变长数组”，允许在每次调用func函数时，n有不同的值，但在执行函数时，n的值是不变的。如果指定数组为静态（static）存储方式，则不能用可变长数组。如：static int a[2*n];就不合法。
* 3. 只能引用数组元素，而不能一次整体调用整个数组全部元素的值。
* 4. 常在定义数组的同时，给各数组元素赋值，这称为数组的初始化。
* 5. 在对全部数组元素赋初值时，由于数据的个数已经确定，因此可以不指定数组长度。
* 6. 如果在定义数值型数组时，指定了数组的长度，并对之初始化，凡未被初始化列表指定初始化的数据元素，系统会自动把他们初始化为0（如果是字符型数组，则初始化为’\0’,如果是指针型数组，则初始化为NULL，即空指针）。
* 7. C语言中，二维数组中元素排列的顺序是按行存放的。
* 8. 注意用矩阵形式即3行4列形式表示二维数组，是逻辑上的概念，能形象的表示出行列关系，而在内存中，各元素是连续存放的，不是二维的，是线性的。
* 9. 字符型数据是以字符的ASCII代码存储在存储单元中，一般占一个字节。
* 10. C语言中没有字符串类型，字符串是存放在字符型数组中的。
* 11. ’\0’代表ASCII码为0的字符，从ASCII码表中可以查到，ASCII码为0的字符不是一个可以显示的字符，而是一个空操作符，即他什么也不做，用它来作为字符串结束标志，不会产生附加的操作或增加有效字符，只起一个供辨别的标志。
* 12. 字符串是用双撇号括起来的，而不是单撇号。
* 13. char c[]="i am happy";此时数组c的长度不是10，而是11，因为字符串常量的最后由系统加上一个‘\0’。
* 14. （1）逐个字符输入输出，用格式符“%c”输入或输出一个字符（2）将整个字符串一次输入或输出，用"%s"格式符，意思是对字符串（string）输入和输出。（3）输出的字符中不包括结束符"\0".(4)用"%s"格式符输出字符串时，printf函数中的输出项是字符数组名，而不是数组元素名.（5）如果数组长度大于字符串实际长度，也只输出到遇’\0’结束。（6）如果一个字符数组中包含一个以上’\0’,则遇第一个’\0’时输出就结束。（7）可以用scanf函数输入一个字符串。（7）scanf函数中的输入项如果是字符数组名，不要再加地址符，因为在C语言中数组名代表该数组的起始地址。
* 15. puts函数----输出字符串的函数，用puts函数输出的字符串中可以包含转义字符，
      例如：char str[]={"China\nBeiJing"}; puts(str);
      输出China
      Beijing
* 16. gets函数—输入字符串的函数。例如：输入字符串"Computer"送给数组共9个字符，而不是8个字符，注意用puts和gets函数只能输出或输入一个字符串，不能写成puts(str1,str2);连接前两个字符串的后面都有‘\0’，连接时将字符串1后面的’\0’取消，只有在新串最后保留’\0’。连接两个字符串时字符串数组1必须写成数组名形式（如str1），字符串2可以是字符数组名，也可以是一个字符串常量。不能用赋值语句将一个字符串常量或字符数组直接给一个字符数组。例如：str1="China"; str1=str2;
* 17. 字符串比较规则是：将两个字符串自左至右逐个字符相比较（按ASCII码值大小比较），直到出现不同的字符或遇到’\0’为止。
* 18. strlen函数—测字符串长度的函数，函数值为字符串中的实际长度（不包括’\0’在内）。
* 19. 在字符串处理函数时，应当在程序文件的开头用#include <string.h>.



## 第七章

* 1. 函数就是功能，每一个函数都用来实现一个特定的功能，函数的名字反映其代表的功能。
* 2. 所有函数必须先定义后使用。
* 3. 实际参数可以是常量，变量或表达式。但要求他们有特定的值，在调用时将实参的值赋给形参。
* 4. 实参与形参的类型应相同或赋值兼容。
* 5. 在定义函数中指定的形参，在未出现函数调用时，他们并不占内存中的存储单元，在发生函数调用时，函数的形参被临时分配内存单元。调用结束时，形参单元被释放，注意，实参单元仍保留并维持原值，没有改变，如果在执行一个被调用函数时，形参的值发生改变，不会改变主调函数的实参的值，因为实参和形参是两个不同的存储单元。
* 6. 注意：实参向形参的数据传递是“值传递”，单向传递，只能由实参的值传递给形参，而不能由形参传给实参。实参和形参在内存中占有不同的存储单元，实参无法得到形参的值。
* 7. 函数的返回值是通过函数中的return语句获得的，注意：在定义函数时要指定函数的类型，在函数定义时指定的函数类型一般应该和return语句中的表达式类型一致，即函数类型决定返回值的类型，对于不带回值的函数，应当用定义函数为“void 类型”。
* 8. 被调用的函数必须是已经定义的 函数（库函数或用户自己定义的函数）。
* 9. 如果使用用户自己定义的函数，而该函数的位置在调用他的函数后面，应该在主调函数中对被调函数做声明。外部声明在整个文件范围中有效。
* 10. 函数不能嵌套定义但可以嵌套调用。
* 11. C语言特点之一就是允许函数递归调用。
* 12. 数组元素可以用作函数实参，不能用作形参，因为形参是在函数被调用时临时分配存储单元的。
* 13. 用数组元素做实参时，向形参变量传递的是数组元素的值，而用数组名做函数实参时，向形参传递的是数组首元素的地址。
* 14. C语言编译系统并不检查形参数组大小。
* 15. 全局变量在程序的全部执行过程中都占用存储单元，而不是仅在需要时才开辟单元。
* 16. 当全局变量和局部变量都存在时，用的是局部变量的值。
* 17. 全局变量全部存放在静态存储区中。
* 18. 动态存储区存放以下数据（1）函数形式参数，在调用函数时给形参分配存储空间。（2）函数中定义的没有用关键字static声明的变量，即自动变量。（3）函数调用时的现场保护和返回地址等。
* 19. c语言中每一个变量和函数都有两个属性，数据类型和数据的存储类别。c语言存储类型包括四种，自动的（auto），静态的（static），寄存器的（register）,外部的（extern）.



## 第八章

* 1. 指针是一个地址，而指针变量是存放地址的变量。
* 2. 指针变量前面的*表示该变量的类型为指针型变量。在定义指针变量时必须指定基类型。
* 3. 怎样引用指针变量：（1）&：取地址运算符，&a是变量a的地址。（2）星号：指针运算符或称间接运算符，P代表指针变量p指向的对象。
* 4. 指针类型的作用是将一个变量的地址传送到另一个函数中。
* 5. 注意：不能企图通过改变指针形参的值而使指针实参的值改变。
* 6. 引用数组元素可以使用下标法。也可以使用指针法，即通过指向数组元素的指针找到所需的元素，使用指针法能使目标程序质量高（占内存少，运行速度快）。
* 7. 在一定条件下允许对指针进行加和减的运算，p+1并不是将p的值加1，而是加一个数组元素所占的字节数。
* 8. 由于p++中星号和++同优先级，结合方向为自右向左，等价于：星号（p++），先引用p的值，实现星号p运算，然后再使p自增1.
* 9. 编译时为字符数组分配若干存储单元，以存放各元素的值，而对字符指针变量，只分配一个存储单元。



## 第九章

* 1. 数组只能存放同一类型的数据，但有时为了存放不同类型数据，C语言就允许建立结构体：由不同类型数据组成的组合型的数据结构。
* 2. 结构体数据类型struct Student（struct是声明结构体类型时所必须使用的关键字，不能省略）
* 3. 不要企图输出结构体的变量名来达到输出结构体变量所有成员的值。



# 程序框架

## 程序结构

```C
#include <stdio.h>
int main()
{
    return 0;
}
```

一个C语言程序的结构有以下特点：

（1）一个程序由一个或者多个源程序文件组成

在一个源程序文件中包括3部分：预处理指令、全局声明、函数定义

（2）函数是C语言程序的主要组成部分

（3）一个函数包括两个部分：函数首部和函数体，函数体又包括声明部分和执行部分

（4）程序总是从main函数开始之执行的

（5）程序中对计算机的操作是由函数中的C语句完成的

（6）在每个数据声明和语句的最后必须有一个分号

（7）C语言本身不提供输入输出语句

（8）程序应当包含注释



## HelloWorld 

```c
#include <stdio.h>
int main()
{
    // 输出 Hello,World!
    printf("Hello,World!\n");
    return 0;
}
```
* 命令行编辑、编译、运行程序

```c
ls -l
gcc hello.c
ls -l
./a.out
```

## 注释

* 1. 单行注释：//注释内容

​     以//的单行注释，以换行符结束

* 2. 多行注释：/* 注释内容 */

​     这种注释可以跨越多行

注释内容可以用英文或者汉字



# 基本语法

## 数据的表现形式及其运算

1.常量

          在程序运行过程中，其值不能被改变的量称为常量
    
          常量有以下几类：
    
                    （1）整型常量：如1000，12345，0，-234等
    
                    （2）实型常量：十进制小数形式、指数形式
    
                    （3）字符常量：①普通字符，用单撇号括起来的一个字符，如'a','Z'等  ②转义字符，如'\'','\\'等
    
                    （4）字符串常量：用双引号引起来的多个字符，如"China"等
    
                    （5）符号常量：用#define指令，指定用一个符号名称代表一个常量，如#define PI 3.1416
    
                              符号常量的优点：含义清楚、一改全改

2.变量

          变量代表一个有名字的、具有特定属性的一个存储单元，它用来存放数据，也就是存放变量的值。在程序运行期间，变量的值是可以改变的。
    
          变量必须先定义，后使用。

3.常变量

          C99允许使用常变量：const int a=3;
    
          常变量是有名字的不变量，而常量是没有名字的不变量。
    
          常变量和符号常量有什么不同？
    
                    答：定义符号常量用#define指令，它是预编译指令，它知识用符号常量代表一个字符串，在预编译时仅是进行字符替换，在预编译后，符号常量就不存在了，对符号常量的名字是不分配存储单元的。而常变量要占用存储单元，有变量值，只是该值不改变。

4.标识符

          标识符就是一个对象的名字。如变量名、函数名等等
    
          C语言规定标识符只能由字母、数字和下划线3种字符组成，且第一个字符必须为字母或下划线。
## 数据类型

![数据类型](../images/20190112080640928.png)

 为char类型分配1字节，为int型数据分配4个字节。

（1）int型

         编译系统分配给int型数据2个字节或4个字节（VC++6.0就是分配4个字节）。在存储单元中的存储方式：用整数的补码形式存放。

（2）short int 型

         分配2个字节

（3）long int 型

         分配4个字节，在一个整数的末尾加大写字母L或小写字母l即可表示为long int型

（4）long long int 型

         分配8个字节

（5）字符类型

         分配1个字节

（6）float类型

         分配4个字节

（7）double类型

         分配8个字节


## 保留字



![image-20200224130042532](../images/image-20200224130042532.png)



## 赋值和初始化

* 变量初始化
* <类型名称><变量名称> = <初始值>；
* eg.	int price = 0;



## 读整数

```c
scanf("%d",&price);
```

举例：plus.c

```c
#include "stdio.h" 

int main()
{
	int a = 0;
	int b = 0;
	
	printf("请输入两个整数："); 
	scanf("%d %d",&a,&b);
	printf("%d + %d = %d\n",a,b,a + b);
	
	return 0; 
}
 
```



## 常量

* 使用 `const` 定义常量，常量用大写字母表示

```c
const int AMOUNT = 100;
```

## 运算符和算子

![image-20200224180423547](../images/image-20200224180423547.png)

```c
eg.
    int a = b + 5;
```

* 计算时间差

```c
#include "stdio.h" 
/*计算时间差*/ 
int main()
{
	int hour1, minute1;
	int hour2, minute2;
	
	scanf("%d %d", &hour1, &minute1);
	scanf("%d %d", &hour2, &minute2);
	
	int t1 = hour1 * 60 + minute1;
	int t2 = hour2 * 60 + minute2;
	
	int t = t2 - t1;
	
	printf("时间差是 %d 小时 %d 分钟。",t/60, t%60); 
	
	return 0; 
}
```

* 运算符优先级

![image-20200224182529423](../images/image-20200224182529423.png)

自增、自减运算符：

         ++i 、--i ：使用 i 之前，先使 i 的值加（减）1
    
         i++ 、i-- ：在使用i之后，使 i 的值加（减）1
    
         自增、自减运算符只能用于变量，而不能用于常量或表达式。

强制类型转换运算符：

         (类型名)(表达式)

求字节数运算符：

         sizeof


## 数据的输入输出

scanf(格式输入)、printf(格式输出)

getchar(输入字符)、putchar(输出字符)

gets(输入字符串)、puts(输出字符串)

在使用它们之前需要在开头用预处理指令#include <stdio.h>

printf 函数的一般格式

printf(格式控制，输出列表)

例如：printf("%f约等于%d",i,c);

（1）格式控制

         是用双撇号括起来的一个字符串，包括两个信息：格式申明和普通字符
    
         格式申明由“%”和格式字符组成，如上面例子中的“%d”、“%f”等
    
         普通字符即需要在输出时原样输出的字符，如上面例子中的“约等于”。

（2）输出列表

         是程序需要输出的一些数据，可以是常量、变量或表达式。
## 选择结构和条件判断

C语言有两种选择语句：

（1）if 语句，用来实现两个分支的选择结构

```c
if (表达式)
    语句1
else
    语句2
```

（2）switch 语句，用来实现多分支的选择结构

```c
switch(表达式)
{
case 常量1 ：语句1
case 常量2 ：语句2
        ...
case 常量n ：语句n
default: 语句n+1
```

## 循环结构

（1）用while语句实现循环

```c
while(表达式)
    语句
```

（2）用do...while 语句实现循环

```c
do
    语句
while(表达式);
```

（3）用for语句实现循环

```c
for(表达式1;表达式2;表达式3)
    语句
```

* 改变循环执行的状态

（1）用break语句提前终止循环

```c
一般形式：break;
```

注意：break语句还可以用来从循环体内跳出循环体，即提前结束循环，接着执行循环下面的语句。break语句只能用于循环语句和switch语句之中，而不能单独使用。

（2）用continue语句提前结束本次循环

```c
一般形式：continue;
```

注：作用为结束本次循环，即跳过循环体中下面尚未执行的语句，转到循环体结束点之前，然后进行下一次是否执行循环的判定。

## bool

* #include <stdbool.h>
* 之后就可以使用bool和true、false

```c
#include <stdio.h>
#include <stdbool.h> 

int main()
{
	bool b = 6>5;
	printf("%d",b);
    
    return 0;
}
```

# 代码训练

## 001 逆序的三位数

【题目】

程序每次读入一个正三位数，然后输出逆序的数字。

注意，当输入的数字含有结尾的 0 时，输出不应带有前导的 0 。比如输入 700 ，输出应该是 7 。

提示：用 %10 可以得到个位数，用 /100 可以得到百位数...。将这样得到的三个数字合起来：百位 * 100 + 十位 * 10 + 个位，就得到了结果。

【输入格式】

每个测试是一个3位的正整数。

【输出格式】

输出逆序的数。

【输入样例】

123

【输出样例】

321

【时间限制】

500ms内存限制：32000kb

【参考代码】

* C 版

```c
#include <stdio.h>
int main()
{
    int t1,t2,mt1,mt2,mt3;
    
    scanf("%d",&t1);	//输入
     
    mt1=t1/100; mt2=(t1-mt1*100)/10; mt3=t1%10;
    t2=mt3*100+mt2*10+mt1;
    
    printf("%d\n",t2);	//输出
     
    return 0;
}
```

## 002 数位数

* 方法一：先判断后执行
```c
int main()
{
	int x;
	int count = 0;
	
	printf("请输入一个任意数："); 
	scanf("%d",&x); 
	
	count++;
	x /= 10;
	while(x > 0)
	{
		count++;
		x /= 10;
	}
	
	printf("该数有 %d 位！\n",count);
    
    return 0;
}
```

* 方法二：先执行后判断
```c
#include <stdio.h>
//数位数 
int main()
{
	int x;
	int count = 0;
	
	printf("请输入一个任意数："); 
	scanf("%d",&x); 
	
	do
	{
		x /= 10;
		count++;
	}while(x>0);
	
	printf("该数有 %d 位！\n",count);
    
    return 0;
}
```

## 003 求阶乘n！

【题目】写一个程序，让用户输入n,然后计算输出n! 
【代码】

``` c
#include <stdio.h>
//求阶乘n！ 
//题目：写一个程序，让用户输入n,然后计算输出n! 
int main()
{
	int n;
	int i=1;
	int fact = 1;//阶乘 
	
	printf("请输入一个任意数n："); 
	scanf("%d",&n); 
	
/*	while(i<=n)
	{
		fact *= i; 
		i++;
	}*/
	for(i=1;i<=n;i++)
	{
		fact *= i; 
	}
	
	printf("%d!= %d\n",n,fact);
    
    return 0;
}
```



## 004 猜数游戏







 



